# 최초 접속 가이드

## TACHYON 대시보드에서 접근하기

tkadmin은 TACHYON 대시보드와 긴밀하게 통합되어 있습니다. 가장 자연스러운 접근 방법은 TACHYON 대시보드를 통한 진입입니다.

### 방법 1: 사이드바 메뉴

1. TACHYON 대시보드(`https://[서버IP]/`)에 관리자 계정으로 로그인합니다.
2. 좌측 사이드바에서 **'Admin'** 메뉴(방패 아이콘)를 클릭합니다.
3. Auth Bridge가 자동으로 인증을 처리하고 tkadmin 메인 화면으로 이동합니다.



### 방법 2: 시스템 설정 페이지

1. TACHYON 대시보드에 로그인합니다.
2. 시스템 설정 페이지로 이동합니다.
3. 우측 상단의 **'tkadmin 이동'** 버튼을 클릭합니다.



### Auth Bridge 인증 흐름

TACHYON 대시보드에서 tkadmin에 접근하면, 다음과 같은 자동 인증 과정이 진행됩니다:

1. **토큰 스캔**: Auth Bridge 페이지(`/tkadmin/bridge`)가 로드되며, 브라우저의 `localStorage` 및 `sessionStorage`에서 TACHYON 인증 토큰(JWT)을 자동으로 탐색합니다.
2. **서버 검증**: 발견된 토큰의 JWT 서명을 검증하고, Redis에 해당 세션이 실제로 존재하는지 확인합니다.
3. **세션 발급**: 검증 성공 시 `tk_session` 쿠키가 발급되고, tkadmin 메인 화면(`/tkadmin/`)으로 자동 리다이렉트됩니다.

?> **팁**: 이 모든 과정은 1~2초 내에 자동으로 완료됩니다. 별도의 ID/비밀번호 입력이 필요하지 않습니다.

!> **주의**: TACHYON에서 로그아웃하면 Redis 세션이 삭제되므로, tkadmin 세션도 즉시 무효화됩니다. 이는 보안을 위한 실시간 동기화 정책입니다.

---

## 직접 URL 접근

TACHYON 대시보드를 거치지 않고 직접 URL로 접근할 수도 있습니다:

```
https://[서버IP]/tkadmin/
```

이 경우에도 Auth Bridge가 동작하여 TACHYON 인증 토큰이 브라우저에 존재하면 자동 로그인됩니다. 토큰이 없거나 만료된 경우에는 TACHYON 로그인 페이지(`/user/login`)로 자동 리다이렉트됩니다.

---

## Recovery Mode 접근 (긴급 시)

TACHYON 인증 서버에 장애가 발생하여 정상적인 로그인이 불가능한 경우, Recovery Mode를 통해 tkadmin에 접근할 수 있습니다.

### 접근 방법

1. 브라우저에서 Recovery 포트로 직접 접속합니다:

```
http://[서버IP]:13701/tkadmin/
```

2. Recovery 로그인 화면이 표시됩니다.



3. **운영체제(OS) 계정**의 사용자명과 비밀번호를 입력합니다.
   - TACHYON 계정이 아닌 Linux OS 계정(PAM 인증)을 사용합니다.

4. 인증 성공 시 `tk_recovery` 쿠키가 발급되고 tkadmin 화면으로 이동합니다.
   - Recovery Mode에서는 제한된 기능만 제공됩니다 (대시보드, 설정 변경, 알림 조회, 감사 로그).

### IP 기반 접근 제어 (ACL)

Recovery 포트는 보안을 위해 IP 기반 접근 제어가 적용됩니다:

| 허용 대상 | 설명 |
|----------|------|
| `127.0.0.1` (localhost) | 서버 자체에서의 접근 항상 허용 |
| `::1` (IPv6 localhost) | IPv6 로컬 접근 허용 |
| `emergency_ips` 목록 | `tkadmin.yml`에 등록된 비상 접근 IP 허용 |

허용되지 않은 IP에서 접근 시, **403 Forbidden** 페이지가 표시되며 차단 사유가 안내됩니다.



!> **주의**: Recovery Mode는 긴급 상황에서만 사용하세요. 평상시에는 TACHYON 대시보드를 통한 정상 접근을 권장합니다.

?> **팁**: 비상 접근 IP는 tkadmin 내/외부 설정 메뉴에서 관리할 수 있습니다. 자세한 내용은 [내/외부 설정 편집기](02-config-editor.md)를 참조하세요.

---

## 화면 구성 소개

tkadmin에 접속하면 다음과 같은 화면 구성을 확인할 수 있습니다:



### 1. 상단 헤더 바

화면 최상단에 위치한 헤더 영역입니다.

| 요소 | 설명 |
|------|------|
| **로고** | tkadmin 제품 로고. 클릭 시 대시보드로 이동 |
| **알림 버튼** | 종 모양 아이콘. 미읽음 알림이 있으면 빨간색 뱃지에 개수가 표시됨 |
| **장애 경보 배너** | 장애 발생 시 상단에 빨간색 배너가 표시됨. 복구 시 자동으로 숨겨짐 |
| **나가기 버튼** | 클릭 시 TACHYON 운영 화면(`/`)으로 복귀 |

### 2. 좌측 사이드바

메뉴 네비게이션 영역입니다. 접힘(아이콘 모드)/펼침 상태를 전환할 수 있으며, 브라우저 `localStorage`에 상태가 저장되어 새로고침 후에도 유지됩니다.

주요 메뉴 항목:

| 메뉴 | 설명 |
|------|------|
| **대시보드** | 시스템 상태 모니터링 및 서비스 리소스 점검 |
| **내/외부 설정** | tkadmin 및 TACHYON 주요 설정 편집 |
| **전문가 편집기** | Monaco Editor 기반 설정 파일 직접 편집 |
| **서비스 관리** | systemd 기반 서비스 제어 (시작/중지/재시작) |
| **환경 체크** | OS 설정, SELinux, 방화벽 등 시스템 환경 점검 |
| **시스템 로그** | 시스템 로그 실시간 조회 |
| **관리자 보고** | Watchdog 감지 이벤트 및 CLI 보고 이력 |

?> **팁**: 브라우저 너비가 768px 이하일 경우 사이드바가 자동으로 아이콘 모드(Collapsed)로 전환됩니다.

### 3. 메인 콘텐츠 영역

사이드바에서 선택한 메뉴에 따라 해당 기능의 화면이 표시되는 영역입니다. 기본적으로 **대시보드** 화면이 표시됩니다.

---

## 나가기 버튼

헤더 우측의 **나가기** 버튼을 클릭하면 TACHYON 운영 화면(루트 경로 `/`)으로 복귀합니다. tkadmin의 세션은 유지되므로, 다시 접근하면 별도 인증 없이 바로 사용할 수 있습니다.

---

## 다음 단계

- [대시보드](01-dashboard.md): 시스템 상태 모니터링 화면을 확인하세요.
- [내/외부 설정 편집기](02-config-editor.md): 주요 설정 항목을 관리하는 방법을 배우세요.

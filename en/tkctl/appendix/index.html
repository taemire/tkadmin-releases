<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-tkctl docs-version-current docs-doc-page docs-doc-id-appendix" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">부록 A: 서비스 로깅 레벨 진단 기술 명세 | tkadmin Document Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://taemire.github.io/tkadmin-releases/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://taemire.github.io/tkadmin-releases/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://taemire.github.io/tkadmin-releases/en/tkctl/appendix"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ko"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-tkctl-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-tkctl-current"><meta data-rh="true" property="og:title" content="부록 A: 서비스 로깅 레벨 진단 기술 명세 | tkadmin Document Portal"><meta data-rh="true" name="description" content="본 부록은 tkctl service loglevel 명령어가 각 서비스의 로깅 레벨을 진단하기 위해 참조하는 설정 파일의 위치와 파싱 로직을 상세히 기술합니다. 시스템 엔지니어는 본 가이드를 참조하여 tkctl가 리포팅하는 정보의 근거를 파악하고, 필요시 수동으로 설정을 검증할 수 있습니다."><meta data-rh="true" property="og:description" content="본 부록은 tkctl service loglevel 명령어가 각 서비스의 로깅 레벨을 진단하기 위해 참조하는 설정 파일의 위치와 파싱 로직을 상세히 기술합니다. 시스템 엔지니어는 본 가이드를 참조하여 tkctl가 리포팅하는 정보의 근거를 파악하고, 필요시 수동으로 설정을 검증할 수 있습니다."><link data-rh="true" rel="icon" href="/tkadmin-releases/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://taemire.github.io/tkadmin-releases/en/tkctl/appendix"><link data-rh="true" rel="alternate" href="https://taemire.github.io/tkadmin-releases/tkctl/appendix" hreflang="ko"><link data-rh="true" rel="alternate" href="https://taemire.github.io/tkadmin-releases/en/tkctl/appendix" hreflang="en"><link data-rh="true" rel="alternate" href="https://taemire.github.io/tkadmin-releases/tkctl/appendix" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"9. 부록","item":"https://taemire.github.io/tkadmin-releases/en/tkctl/appendix"}]}</script><link rel="stylesheet" href="/tkadmin-releases/en/assets/css/styles.d7656914.css">
<script src="/tkadmin-releases/en/assets/js/runtime~main.45661e59.js" defer="defer"></script>
<script src="/tkadmin-releases/en/assets/js/main.ec52bb29.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/tkadmin-releases/en/"><b class="navbar__title text--truncate">tkadmin Docs</b></a><a class="navbar__item navbar__link" href="/tkadmin-releases/en/tkadmin/">tkadmin 매뉴얼</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/tkadmin-releases/en/tkctl/">tkctl 매뉴얼</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/tkadmin-releases/tkctl/appendix" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/tkadmin-releases/en/tkctl/appendix" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">📄 PDF 다운로드</a><ul class="dropdown__menu"><li><a href="/tkadmin-releases/en/pdfs/tkadmin-manual.pdf" target="_blank" rel="noopener noreferrer" class="dropdown__link">tkadmin 운영자 매뉴얼 (PDF)<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="/tkadmin-releases/en/pdfs/tkctl-manual.pdf" target="_blank" rel="noopener noreferrer" class="dropdown__link">tkctl CLI 매뉴얼 (PDF)<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tkadmin-releases/en/tkctl/"><span title="0. 소개" class="linkLabel_WmDU">0. 소개</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tkadmin-releases/en/tkctl/install"><span title="1. 설치 및 설정" class="linkLabel_WmDU">1. 설치 및 설정</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tkadmin-releases/en/tkctl/usage"><span title="2. 기본 사용법" class="linkLabel_WmDU">2. 기본 사용법</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/tkadmin-releases/en/tkctl/category/3-주요-명령어"><span title="3. 주요 명령어" class="categoryLinkLabel_W154">3. 주요 명령어</span></a><button aria-label="Expand sidebar category &#x27;3. 주요 명령어&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tkadmin-releases/en/tkctl/shell"><span title="4. 대화형 쉘 모드" class="linkLabel_WmDU">4. 대화형 쉘 모드</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tkadmin-releases/en/tkctl/options"><span title="5. 전역 옵션" class="linkLabel_WmDU">5. 전역 옵션</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tkadmin-releases/en/tkctl/i18n"><span title="6. 다국어 지원" class="linkLabel_WmDU">6. 다국어 지원</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tkadmin-releases/en/tkctl/logging"><span title="7. 로깅 시스템" class="linkLabel_WmDU">7. 로깅 시스템</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tkadmin-releases/en/tkctl/trouble"><span title="8. 문제 해결" class="linkLabel_WmDU">8. 문제 해결</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/tkadmin-releases/en/tkctl/appendix"><span title="9. 부록" class="linkLabel_WmDU">9. 부록</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tkadmin-releases/en/tkctl/SECURITY_IMPLEMENTATION_SPEC_2026"><span title="KISA 2026 구현 명세서" class="linkLabel_WmDU">KISA 2026 구현 명세서</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tkadmin-releases/en/tkctl/SECURITY_ANALYSIS_GUIDE_2026"><span title="KISA 2026 분석 가이드" class="linkLabel_WmDU">KISA 2026 분석 가이드</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/tkadmin-releases/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">9. 부록</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>부록 A: 서비스 로깅 레벨 진단 기술 명세</h1></header>
<p>본 부록은 <code>tkctl service loglevel</code> 명령어가 각 서비스의 로깅 레벨을 진단하기 위해 참조하는 설정 파일의 위치와 파싱 로직을 상세히 기술합니다. 시스템 엔지니어는 본 가이드를 참조하여 <code>tkctl</code>가 리포팅하는 정보의 근거를 파악하고, 필요시 수동으로 설정을 검증할 수 있습니다.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-개요">1. 개요<a href="#1-개요" class="hash-link" aria-label="Direct link to 1. 개요" title="Direct link to 1. 개요" translate="no">​</a></h2>
<p><code>tkctl</code>는 각 서비스의 설정 파일을 텍스트 기반으로 직접 파싱하거나 YAML 파서를 사용하여 로깅 관련 지시어를 추출합니다. 각 서비스는 설치 기반 디렉토리(<code>${BaseDir}</code>)를 기준으로 상대 경로를 탐색합니다.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-미들웨어-서비스-middleware">2. 미들웨어 서비스 (Middleware)<a href="#2-미들웨어-서비스-middleware" class="hash-link" aria-label="Direct link to 2. 미들웨어 서비스 (Middleware)" title="Direct link to 2. 미들웨어 서비스 (Middleware)" translate="no">​</a></h2>
<table><thead><tr><th style="text-align:left">서비스</th><th style="text-align:left">참조 파일 경로</th><th style="text-align:left">진단 방식 (Parsing Logic)</th></tr></thead><tbody><tr><td style="text-align:left"><strong>NGINX</strong></td><td style="text-align:left"><code>nginx/conf/nginx.conf</code></td><td style="text-align:left"><strong>1. Error Log</strong>: <code>error_log</code> 지시어의 마지막 인자를 추출하여 레벨(DEBUG, INFO 등)을 표시합니다.<br><strong>2. Access Log</strong>: NGINX는 액세스 로그에 레벨 개념을 사용하지 않으므로, <code>access_log off;</code> 지시어 존재 여부만 확인하여 <strong>ON/OFF</strong> 상태로 리포팅합니다.<br>표시 형식: <code>레벨 (Access: ON/OFF)</code></td></tr><tr><td style="text-align:left"><strong>Redis</strong></td><td style="text-align:left"><code>redis/conf/redis.conf</code> 또는 <code>redis/redis.conf</code></td><td style="text-align:left"><code>loglevel</code> 지시어의 우측 값을 추출합니다.<br>표시 예: <code>loglevel notice</code> → <strong>NOTICE</strong></td></tr><tr><td style="text-align:left"><strong>MariaDB</strong></td><td style="text-align:left"><code>mariadb/my.cnf</code></td><td style="text-align:left">파일 존재 여부만 확인하며, 기본값으로 **INFO (Default)**를 표시합니다.<br><em>(MariaDB는 단일 레벨 설정보다 상세 로깅 설정을 주로 사용함)</em></td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-tachyon-java-서비스">3. TACHYON Java 서비스<a href="#3-tachyon-java-서비스" class="hash-link" aria-label="Direct link to 3. TACHYON Java 서비스" title="Direct link to 3. TACHYON Java 서비스" translate="no">​</a></h2>
<p>TACHYON의 모든 Java 서비스(<code>api</code>, <code>auth</code>, <code>manager</code>, <code>stat</code>, <code>batch</code>, <code>report</code>, <code>watchdog</code>)는 다음의 우선순위에 따라 파일을 탐색합니다.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="31-설정-파일-탐색-우선순위">3.1 설정 파일 탐색 우선순위<a href="#31-설정-파일-탐색-우선순위" class="hash-link" aria-label="Direct link to 3.1 설정 파일 탐색 우선순위" title="Direct link to 3.1 설정 파일 탐색 우선순위" translate="no">​</a></h3>
<ol>
<li class=""><code>[svc]/conf/[svc].yml_dev</code> (YAML) - <strong>최우선 순위 (Plaintext 원본)</strong></li>
<li class=""><code>[svc]/conf/[svc].yml</code> (YAML)</li>
<li class=""><code>[svc]/conf/logback-spring.xml</code> (XML)</li>
<li class=""><code>[svc]/conf/log4j2.xml</code> (XML)</li>
<li class=""><code>[svc]/conf/application.yml</code> (YAML)</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="32-파싱-기술-명세">3.2 파싱 기술 명세<a href="#32-파싱-기술-명세" class="hash-link" aria-label="Direct link to 3.2 파싱 기술 명세" title="Direct link to 3.2 파싱 기술 명세" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="yaml-파싱-yml-yml_dev">YAML 파싱 (<code>.yml</code>, <code>.yml_dev</code>)<a href="#yaml-파싱-yml-yml_dev" class="hash-link" aria-label="Direct link to yaml-파싱-yml-yml_dev" title="Direct link to yaml-파싱-yml-yml_dev" translate="no">​</a></h4>
<p><code>gopkg.in/yaml.v3</code> 라이브러리를 사용하여 다음 계층의 값을 추출합니다:</p>
<ul>
<li class=""><strong>경로</strong>: <code>logging</code> &gt; <code>level</code> &gt; <code>root</code></li>
<li class=""><strong>구조 예시</strong>:<!-- -->
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">logging</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">level</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">root</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> INFO  </span><span class="token comment" style="color:rgb(98, 114, 164)"># &lt;-- 추출 대상</span><br></span></code></pre></div></div>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="xml-파싱-xml">XML 파싱 (<code>.xml</code>)<a href="#xml-파싱-xml" class="hash-link" aria-label="Direct link to xml-파싱-xml" title="Direct link to xml-파싱-xml" translate="no">​</a></h4>
<p>문자열 패턴 매칭을 통해 <code>&lt;root&gt;</code> 태그의 <code>level</code> 속성을 추출합니다:</p>
<ul>
<li class=""><strong>정규식/패턴</strong>: <code>&lt;root level=&quot;([^&quot;]+)&quot;&gt;</code></li>
<li class=""><strong>구조 예시</strong>:<!-- -->
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">root</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">level</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">DEBUG</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- &lt;-- level 속성값 추출 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">appender-ref</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">CONSOLE</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">root</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre></div></div>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-관리-도구-management-tools">4. 관리 도구 (Management Tools)<a href="#4-관리-도구-management-tools" class="hash-link" aria-label="Direct link to 4. 관리 도구 (Management Tools)" title="Direct link to 4. 관리 도구 (Management Tools)" translate="no">​</a></h2>
<table><thead><tr><th style="text-align:left">서비스</th><th style="text-align:left">참조 파일 경로</th><th style="text-align:left">진단 방식 (Parsing Logic)</th></tr></thead><tbody><tr><td style="text-align:left"><strong>tkadmin</strong></td><td style="text-align:left"><code>${BaseDir}/tkadmin.yml</code></td><td style="text-align:left">YAML 파싱을 통해 <code>logging.level.root</code> 값을 추출합니다.</td></tr><tr><td style="text-align:left"><strong>tkctl</strong></td><td style="text-align:left"><code>${BaseDir}/tkctl.ini</code></td><td style="text-align:left">설정 파일 내 <code>log_level</code> 키값을 확인합니다. (미설정 시 <code>INFO</code>)</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-진단-상태status-설명">5. 진단 상태(Status) 설명<a href="#5-진단-상태status-설명" class="hash-link" aria-label="Direct link to 5. 진단 상태(Status) 설명" title="Direct link to 5. 진단 상태(Status) 설명" translate="no">​</a></h2>
<table><thead><tr><th style="text-align:left">상태</th><th style="text-align:left">의미</th><th style="text-align:left">대응 방법</th></tr></thead><tbody><tr><td style="text-align:left"><strong>OK</strong></td><td style="text-align:left">설정 파일을 정상적으로 찾고 파싱함</td><td style="text-align:left">-</td></tr><tr><td style="text-align:left"><strong>CONFIG NOT FOUND</strong></td><td style="text-align:left">지정된 경로에 설정 파일이 존재하지 않음</td><td style="text-align:left">해당 서비스의 설치 경로를 확인하십시오.</td></tr><tr><td style="text-align:left"><strong>INVALID</strong></td><td style="text-align:left">파일은 발견했으나 로깅 레벨 지시어 부재</td><td style="text-align:left">설정 파일 내에 <code>root</code> 레벨 설정이 누락되었는지 확인하십시오.</td></tr><tr><td style="text-align:left"><strong>-</strong></td><td style="text-align:left">진단 불가능</td><td style="text-align:left">특정 서비스를 지정하여 상세 진단을 수행하십시오.</td></tr></tbody></table>
<blockquote>
<p><strong>참고</strong>: <code>tkctl</code>는 Java 서비스의 경우 <code>yml_dev</code> 파일을 수정하고 이를 <code>yml</code>로 복사하여 반영하는 관리 워크플로우를 권장합니다.</p>
</blockquote>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="6-시스템-환경-설정-진단-및-구성-명세-env">6. 시스템 환경 설정 진단 및 구성 명세 (env)<a href="#6-시스템-환경-설정-진단-및-구성-명세-env" class="hash-link" aria-label="Direct link to 6. 시스템 환경 설정 진단 및 구성 명세 (env)" title="Direct link to 6. 시스템 환경 설정 진단 및 구성 명세 (env)" translate="no">​</a></h2>
<p><code>tkctl env</code> 명령어는 TACHYON 운영에 필수적인 커널 및 시스템 환경 변수를 진단하고 최적화합니다.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="61-selinux">6.1 SELinux<a href="#61-selinux" class="hash-link" aria-label="Direct link to 6.1 SELinux" title="Direct link to 6.1 SELinux" translate="no">​</a></h3>
<table><thead><tr><th style="text-align:left">구분</th><th style="text-align:left">진단/참조 로직</th></tr></thead><tbody><tr><td style="text-align:left"><strong>현재 실행 모드</strong></td><td style="text-align:left"><code>getenforce</code> 명령어를 우선 실행하며, 부재 시 <code>sestatus</code> 결과에서 <code>Current mode</code>를 추출합니다.</td></tr><tr><td style="text-align:left"><strong>영구 설정 모드</strong></td><td style="text-align:left"><code>/etc/selinux/config</code> 파일의 <code>SELINUX=</code> 지시어 값을 직접 파싱합니다.</td></tr><tr><td style="text-align:left"><strong>변경 프로세스</strong></td><td style="text-align:left"><code>--set</code> 실행 시 <code>setenforce</code>를 통한 즉시 반영과 <code>config</code> 수정을 통한 영구 반영을 동시에 수행합니다. (Disabled 설정 시 재부팅 안내)</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="62-시스템-자원-제한-ulimit">6.2 시스템 자원 제한 (Ulimit)<a href="#62-시스템-자원-제한-ulimit" class="hash-link" aria-label="Direct link to 6.2 시스템 자원 제한 (Ulimit)" title="Direct link to 6.2 시스템 자원 제한 (Ulimit)" translate="no">​</a></h3>
<table><thead><tr><th style="text-align:left">구분</th><th style="text-align:left">진단/참조 로직</th></tr></thead><tbody><tr><td style="text-align:left"><strong>커널 전체 제한</strong></td><td style="text-align:left"><code>/etc/security/limits.conf</code> 파일을 파싱하여 도메인별 <code>nofile</code> 설정을 수집합니다.</td></tr><tr><td style="text-align:left"><strong>서비스별 제한</strong></td><td style="text-align:left"><code>systemctl show -p LimitNOFILE --value [SVC]</code> 명령을 통해 systemd 유닛에 구동 시 할당된 실제 값을 조회합니다.</td></tr><tr><td style="text-align:left"><strong>TACHYON 블록</strong></td><td style="text-align:left"><code>--set</code> 기능을 통한 설정 시, 기존 파일 훼손을 방지하기 위해 <code># --- TACHYON LIMITS START ---</code> 마커를 사용한 전용 블록을 관리합니다.</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="63-방화벽-firewall">6.3 방화벽 (Firewall)<a href="#63-방화벽-firewall" class="hash-link" aria-label="Direct link to 6.3 방화벽 (Firewall)" title="Direct link to 6.3 방화벽 (Firewall)" translate="no">​</a></h3>
<ul>
<li class=""><strong>활성 상태 감지</strong>: <code>systemctl is-active</code>를 통해 <code>firewalld</code>와 <code>iptables</code> 서비스의 동작 여부를 동시에 체크합니다.</li>
<li class=""><strong>포트 목록 추출</strong>: <code>firewalld</code>가 활성 상태일 때 <code>firewall-cmd --list-ports</code> 및 <code>--list-services</code> 결과를 파싱하여 제공합니다.</li>
<li class=""><strong>자동 허용 로직</strong>: <code>--set</code> 인자 생략 시 TACHYON 관리 포트(443)와 현재 운영 중인 SSH 포트를 자동 탐지하여 개방합니다.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="64-ssh-설정-및-연동">6.4 SSH 설정 및 연동<a href="#64-ssh-설정-및-연동" class="hash-link" aria-label="Direct link to 6.4 SSH 설정 및 연동" title="Direct link to 6.4 SSH 설정 및 연동" translate="no">​</a></h3>
<ul>
<li class=""><strong>포트 감지</strong>: <code>/etc/ssh/sshd_config</code> 파일에서 주석처리 되지 않은 <code>Port</code> 지시어를 탐색합니다. (지시어 부재 시 22번 표준 포트로 간주)</li>
<li class=""><strong>변경 및 연동 워크플로우</strong>:<!-- -->
<ol>
<li class=""><code>/etc/ssh/sshd_config</code> 내 Port 번호 수정</li>
<li class=""><code>firewall-cmd --add-port=[NEW_PORT]/tcp</code>를 통해 신규 포트 방화벽 영구 허용 (<code>--permanent</code>)</li>
<li class=""><code>firewall-cmd --reload</code>를 실행하여 방화벽 설정 즉시 반영</li>
<li class=""><code>systemctl restart sshd</code>를 실행하여 설정 완료</li>
</ol>
</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="7-jvm-메모리-설정-및-자동-최적화-기술-명세-service-jvm">7. JVM 메모리 설정 및 자동 최적화 기술 명세 (service jvm)<a href="#7-jvm-메모리-설정-및-자동-최적화-기술-명세-service-jvm" class="hash-link" aria-label="Direct link to 7. JVM 메모리 설정 및 자동 최적화 기술 명세 (service jvm)" title="Direct link to 7. JVM 메모리 설정 및 자동 최적화 기술 명세 (service jvm)" translate="no">​</a></h2>
<p><code>tkctl service jvm</code> 명령어는 JVM 기반 서비스의 힙 메모리를 진단하고 최적화하기 위해 다음 기술 명세를 따릅니다.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="71-서비스별-설정-파일-및-파싱-로직">7.1 서비스별 설정 파일 및 파싱 로직<a href="#71-서비스별-설정-파일-및-파싱-로직" class="hash-link" aria-label="Direct link to 7.1 서비스별 설정 파일 및 파싱 로직" title="Direct link to 7.1 서비스별 설정 파일 및 파싱 로직" translate="no">​</a></h3>
<table><thead><tr><th style="text-align:left">서비스</th><th style="text-align:left">설정 파일 경로</th><th style="text-align:left">추출/변경 로직</th></tr></thead><tbody><tr><td style="text-align:left"><strong>OpenSearch</strong></td><td style="text-align:left"><code>opensearch/opensearch/config/jvm.options</code></td><td style="text-align:left"><code>-Xms</code>, <code>-Xmx</code>로 시작하는 라인을 직접 파싱합니다.</td></tr><tr><td style="text-align:left"><strong>Kafka</strong></td><td style="text-align:left"><code>kafka/bin/kafka-server-start.sh</code></td><td style="text-align:left"><code>KAFKA_HEAP_OPTS</code> 환경 변수 할당 라인을 정규식으로 추출합니다.</td></tr><tr><td style="text-align:left"><strong>Logstash</strong></td><td style="text-align:left"><code>logstash/logstash-kafka-os/config/jvm.options</code></td><td style="text-align:left"><code>-Xms</code>, <code>-Xmx</code> 라인을 직접 파싱합니다.</td></tr><tr><td style="text-align:left"><strong>TACHYON 서비스</strong></td><td style="text-align:left"><code>[svc]/bin/tachyon-[svc].sh</code></td><td style="text-align:left">실행 스크립트 내 <code>java</code> 명령 인자 중 <code>-Xms</code>, <code>-Xmx</code> 패턴을 추출합니다.</td></tr><tr><td style="text-align:left"><strong>Watchdog</strong></td><td style="text-align:left"><code>bin/tachyon-watchdog.sh</code></td><td style="text-align:left">동일한 쉘 스크립트 정규식 파싱 방식을 사용합니다.</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="72-자동-최적화-auto-알고리즘-상세">7.2 자동 최적화 (auto) 알고리즘 상세<a href="#72-자동-최적화-auto-알고리즘-상세" class="hash-link" aria-label="Direct link to 7.2 자동 최적화 (auto) 알고리즘 상세" title="Direct link to 7.2 자동 최적화 (auto) 알고리즘 상세" translate="no">​</a></h3>
<p><code>--set auto</code> 옵션 실행 시, 다음 가중치 모델을 기반으로 시스템 총 메모리를 배분합니다.</p>
<ol>
<li class=""><strong>최적화 공식</strong>: <code>할당량 = (전체메모리 - 기본 OS 점유분) * 서비스별 가중치</code></li>
<li class=""><strong>서비스별 가중치(Weight)</strong>:<!-- -->
<ul>
<li class=""><code>opensearch</code>: 20%</li>
<li class=""><code>kafka</code>: 10%</li>
<li class=""><code>api</code>: 5%</li>
<li class=""><code>manager</code>, <code>auth</code>, <code>stat</code>, <code>batch</code>, <code>report</code>: 각 3~5%</li>
<li class=""><code>watchdog</code>: 2% (최소 128MB 보장)</li>
</ul>
</li>
<li class=""><strong>제한 정책(Guardrails)</strong>:<!-- -->
<ul>
<li class=""><strong>최대 상한</strong>: 단일 서비스 힙 크기는 <strong>16GB</strong>를 초과하지 않도록 캡핑(Capping)합니다.</li>
<li class=""><strong>최소 하한</strong>: 서비스 가시성 확보를 위해 최소 <strong>256MB~1GB</strong> (서비스별 상이) 하한선을 적용합니다.</li>
<li class=""><strong>에이전트 수량 가중치</strong>: <code>--agents</code> 값이 클수록 API 및 Manager 서비스의 비중을 동적으로 상향 조정합니다.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="73-안전-관리-프로세스">7.3 안전 관리 프로세스<a href="#73-안전-관리-프로세스" class="hash-link" aria-label="Direct link to 7.3 안전 관리 프로세스" title="Direct link to 7.3 안전 관리 프로세스" translate="no">​</a></h3>
<ul>
<li class=""><strong>백업 정책</strong>: 설정 변경 전 <code>${ConfigFile}.bak</code> 파일을 생성하며, 이미 백업이 존재하는 경우 덮어쓰지 않고 타임스탬프를 활용하여 이력을 보호합니다.</li>
<li class=""><strong>리소스 경고</strong>: 총 JVM 할당량이 물리 메모리의 **80%**를 초과할 경우, 운영 안정성을 위해 경고 메시지를 출력하고 수동 검토를 권장합니다.</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="8-os-메모리-관리-및-점유-방식-기술-명세-memory-management">8. OS 메모리 관리 및 점유 방식 기술 명세 (Memory Management)<a href="#8-os-메모리-관리-및-점유-방식-기술-명세-memory-management" class="hash-link" aria-label="Direct link to 8. OS 메모리 관리 및 점유 방식 기술 명세 (Memory Management)" title="Direct link to 8. OS 메모리 관리 및 점유 방식 기술 명세 (Memory Management)" translate="no">​</a></h2>
<p><code>tkctl info</code> 명령어가 리포팅하는 메모리 사용량이 사용자가 체감하는 수치보다 높게 확인되는 현상에 대한 기술적 근거를 설명합니다.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="81-linux-vs-windows-메모리-관리-기조-차이">8.1 Linux vs Windows 메모리 관리 기조 차이<a href="#81-linux-vs-windows-메모리-관리-기조-차이" class="hash-link" aria-label="Direct link to 8.1 Linux vs Windows 메모리 관리 기조 차이" title="Direct link to 8.1 Linux vs Windows 메모리 관리 기조 차이" translate="no">​</a></h3>
<table><thead><tr><th style="text-align:left">항목</th><th style="text-align:left">Linux (운영 환경)</th><th style="text-align:left">Windows (비교 환경)</th></tr></thead><tbody><tr><td style="text-align:left"><strong>핵심 철학</strong></td><td style="text-align:left">&quot;사용되지 않는 메모리는 낭비다 (Free RAM is wasted RAM)&quot;</td><td style="text-align:left">사용자 가시성 중심의 리소스 유연 배분</td></tr><tr><td style="text-align:left"><strong>캐시 활용</strong></td><td style="text-align:left">디스크 I/O 속도 향상을 위해 남은 모든 메모리를 <strong>Page Cache</strong>로 전용</td><td style="text-align:left">Superfetch 등을 통한 선독처리를 수행하나 리포팅 시에는 &#x27;여유&#x27;로 간주하는 경향</td></tr><tr><td style="text-align:left"><strong>사용량 계산</strong></td><td style="text-align:left"><code>Used = Total - Free</code> (Free는 순수 물리 빈 공간)</td><td style="text-align:left"><code>Used = Total - Available</code> (즉시 사용 가능한 캐시 포함 여유분)</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="82-페이지-캐시page-cache와-과점유-현황">8.2 페이지 캐시(Page Cache)와 과점유 현황<a href="#82-페이지-캐시page-cache와-과점유-현황" class="hash-link" aria-label="Direct link to 8.2 페이지 캐시(Page Cache)와 과점유 현황" title="Direct link to 8.2 페이지 캐시(Page Cache)와 과점유 현황" translate="no">​</a></h3>
<ol>
<li class="">
<p><strong>과점유 현상 (Memory Occupancy)</strong>:</p>
<ul>
<li class="">Linux 커널은 파일을 읽거나 쓸 때 해당 데이터를 물리 메모리에 보관(Page Cache)합니다. 이는 이후 동일 파일 접근 시 느린 디스크 대신 빠른 메모리에서 즉시 응답하기 위함입니다.</li>
<li class="">TACHYON 서비스(OpenSearch, MariaDB 등)는 대량의 데이터를 지속적으로 처리하므로 시간이 지날수록 캐시 점유율이 높아져 <code>Free</code> 메모리가 0에 가깝게 표시될 수 있습니다.</li>
</ul>
</li>
<li class="">
<p><strong>사용자 가시성</strong>:</p>
<ul>
<li class=""><code>tkctl info</code>는 운영체제 커널의 물리적 점유 상태를 직접 리포팅하므로, 이러한 캐시 영역을 모두 포함하여 &#x27;사용 중&#x27;으로 표시합니다.</li>
</ul>
</li>
<li class="">
<p><strong>실질 가용성 (Available Memory)</strong>:</p>
<ul>
<li class="">이 캐시 영역은 애플리케이션이 실제 메모리 할당을 요청하면 OS가 즉시 비워줄 수 있는 <strong>삭제 가능한(Reclaimable)</strong> 공간입니다. 따라서 점유율 수치가 높더라도 시스템의 실질적인 작업 수행 능력에는 지장을 주지 않습니다.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="83-결론-및-판정-기준">8.3 결론 및 판정 기준<a href="#83-결론-및-판정-기준" class="hash-link" aria-label="Direct link to 8.3 결론 및 판정 기준" title="Direct link to 8.3 결론 및 판정 기준" translate="no">​</a></h3>
<p><code>tkctl info</code>에서 확인되는 높은 메모리 점유율은 대부분 <strong>I/O 성능 향상을 위한 Linux 커널의 정상적인 최적화 결과</strong>입니다. 시스템 리소스가 실제로 부족한지 여부는 점유율 수치보다는 다음 지표를 기준으로 판단하십시오.</p>
<ul>
<li class=""><strong>스왑(Swap) 발생 여부</strong>: 물리 메모리가 부족하여 디스크 압축/교환이 빈번하게 일어나는지 확인.</li>
<li class=""><strong>OOM Killer 로그</strong>: 커널 로그(<code>dmesg</code>)에 메모리 고갈로 인한 프로세스 강제 종료 이력이 있는지 확인.</li>
</ul>
<blockquote>
<p><strong>TIP</strong>: Linux 환경에서 실질적으로 &#x27;사용 가능한&#x27; 양을 알고 싶다면 유휴 공간(Free)이 아닌 가용 공간(Available) 지표를 참조해야 합니다. (tkctl는 향후 버전에서 가용 지표를 포함하도록 개선 예정입니다.)</p>
</blockquote>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="9-로그-분석-시스템-기술-명세-analyze">9. 로그 분석 시스템 기술 명세 (analyze)<a href="#9-로그-분석-시스템-기술-명세-analyze" class="hash-link" aria-label="Direct link to 9. 로그 분석 시스템 기술 명세 (analyze)" title="Direct link to 9. 로그 분석 시스템 기술 명세 (analyze)" translate="no">​</a></h2>
<p>본 부록은 <code>tkctl analyze</code> 명령어가 MariaDB 및 OpenSearch에서 로그 데이터를 분석하기 위해 사용하는 내부 동작 원리와 쿼리 구조를 상세히 기술합니다. 시스템 엔지니어는 본 가이드를 참조하여 <code>tkctl</code>의 분석 결과를 검증하거나, CLI 도구 없이 직접 수동 분석을 수행할 수 있습니다.</p>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="91-개요-및-데이터-소스">9.1 개요 및 데이터 소스<a href="#91-개요-및-데이터-소스" class="hash-link" aria-label="Direct link to 9.1 개요 및 데이터 소스" title="Direct link to 9.1 개요 및 데이터 소스" translate="no">​</a></h3>
<p><code>tkctl analyze</code> 명령어는 TACHYON 시스템의 두 가지 데이터 소스를 쿼리합니다:</p>
<table><thead><tr><th style="text-align:left">데이터 소스</th><th style="text-align:left">용도</th><th style="text-align:left">연결 정보 소스</th></tr></thead><tbody><tr><td style="text-align:left"><strong>OpenSearch</strong></td><td style="text-align:left">실시간 로그 집계, 이상 탐지</td><td style="text-align:left"><code>app_info.properties</code> → <code>opensearch_ip</code>, <code>opensearch_port</code>, <code>opensearch_id</code>, <code>opensearch_pw</code></td></tr><tr><td style="text-align:left"><strong>MariaDB</strong></td><td style="text-align:left">로그 테이블 증감 추세 분석</td><td style="text-align:left"><code>app_info.properties</code> → <code>db_ip</code>, <code>db_port</code>, <code>db_user</code>, <code>db_password</code></td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="92-opensearch-인덱스-명명-규칙">9.2 OpenSearch 인덱스 명명 규칙<a href="#92-opensearch-인덱스-명명-규칙" class="hash-link" aria-label="Direct link to 9.2 OpenSearch 인덱스 명명 규칙" title="Direct link to 9.2 OpenSearch 인덱스 명명 규칙" translate="no">​</a></h3>
<p>TACHYON 시스템은 매체제어 이벤트 로그를 <strong>월별 인덱스</strong>로 분리하여 OpenSearch에 저장합니다.</p>
<p><strong>인덱스 이름 형식:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{SPCODE}_{YEAR}_{MONTH}</span><br></span></code></pre></div></div>
<p><strong>예시:</strong></p>
<ul>
<li class="">기관 코드(<code>SPCODE</code>): <code>00133fkfkg</code></li>
<li class="">2026년 1월: <code>00133fkfkg_2026_01</code></li>
<li class="">2025년 12월: <code>00133fkfkg_2025_12</code></li>
</ul>
<p><strong>SPCODE 확인 방법:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># app_info.properties 파일에서 확인</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">grep &quot;spcode&quot; /usr/local/TACHYON/TTS40/conf/app_info.properties_dev</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 또는 데이터베이스 이름 확인 (동일한 값)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tkctl info</span><br></span></code></pre></div></div>
<p><strong>인덱스 목록 조회 (수동):</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># OpenSearch API로 직접 조회</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl -s &quot;http://localhost:9200/_cat/indices?v&quot; | grep -E &quot;00133fkfkg_&quot;</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="93-opensearch-필드-매핑-field-mapping">9.3 OpenSearch 필드 매핑 (Field Mapping)<a href="#93-opensearch-필드-매핑-field-mapping" class="hash-link" aria-label="Direct link to 9.3 OpenSearch 필드 매핑 (Field Mapping)" title="Direct link to 9.3 OpenSearch 필드 매핑 (Field Mapping)" translate="no">​</a></h3>
<p>매체제어 로그 인덱스의 주요 필드 구조입니다:</p>
<table><thead><tr><th style="text-align:left">필드명</th><th style="text-align:left">타입</th><th style="text-align:left">설명</th><th style="text-align:left">예시 값</th></tr></thead><tbody><tr><td style="text-align:left"><code>server_dt</code></td><td style="text-align:left"><code>keyword</code></td><td style="text-align:left">서버 수신 일자 (YYYY-MM-DD)</td><td style="text-align:left"><code>2026-01-15</code></td></tr><tr><td style="text-align:left"><code>client_dt</code></td><td style="text-align:left"><code>keyword</code></td><td style="text-align:left">클라이언트 이벤트 발생 일자</td><td style="text-align:left"><code>2026-01-15</code></td></tr><tr><td style="text-align:left"><code>puid</code></td><td style="text-align:left"><code>keyword</code></td><td style="text-align:left">에이전트 고유 식별자 (UUID)</td><td style="text-align:left"><code>a1b2c3d4-e5f6-7890-abcd-ef1234567890</code></td></tr><tr><td style="text-align:left"><code>process_nm</code></td><td style="text-align:left"><code>keyword</code>/<code>text</code></td><td style="text-align:left">실행 프로세스 경로</td><td style="text-align:left"><code>C:\Windows\Explorer.EXE</code></td></tr><tr><td style="text-align:left"><code>file_nm</code></td><td style="text-align:left"><code>keyword</code>/<code>text</code></td><td style="text-align:left">접근 대상 파일/경로</td><td style="text-align:left"><code>E:\Documents\report.xlsx</code></td></tr><tr><td style="text-align:left"><code>event_type</code></td><td style="text-align:left"><code>keyword</code></td><td style="text-align:left">이벤트 유형 코드</td><td style="text-align:left"><code>READ</code>, <code>WRITE</code>, <code>COPY</code></td></tr></tbody></table>
<blockquote>
<p><strong>참고</strong>: <code>.keyword</code> 서픽스가 붙은 필드는 정확 일치 검색 및 집계에 사용됩니다. 집계 쿼리에서는 반드시 <code>process_nm.keyword</code> 형태로 사용하십시오.</p>
</blockquote>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="94-media-top-프로세스경로별-top-n-분석">9.4 media-top: 프로세스+경로별 Top N 분석<a href="#94-media-top-프로세스경로별-top-n-분석" class="hash-link" aria-label="Direct link to 9.4 media-top: 프로세스+경로별 Top N 분석" title="Direct link to 9.4 media-top: 프로세스+경로별 Top N 분석" translate="no">​</a></h3>
<p><strong>목적</strong>: 어떤 프로세스가 어떤 경로에 가장 많이 접근했는지 파악</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="941-opensearch-dsl-쿼리">9.4.1 OpenSearch DSL 쿼리<a href="#941-opensearch-dsl-쿼리" class="hash-link" aria-label="Direct link to 9.4.1 OpenSearch DSL 쿼리" title="Direct link to 9.4.1 OpenSearch DSL 쿼리" translate="no">​</a></h4>
<p><code>tkctl analyze media-top --month 2026-01 --limit 20</code> 실행 시 내부적으로 다음 DSL을 사용합니다:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;size&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;range&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;server_dt&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;gte&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2026-01-01&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;lt&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2026-02-01&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;aggs&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;by_process_path&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;composite&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;size&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;sources&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;process&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;terms&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;field&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;process_nm.keyword&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;path&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;terms&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;field&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;file_nm.keyword&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="942-수동-실행-방법">9.4.2 수동 실행 방법<a href="#942-수동-실행-방법" class="hash-link" aria-label="Direct link to 9.4.2 수동 실행 방법" title="Direct link to 9.4.2 수동 실행 방법" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># OpenSearch에서 직접 쿼리 실행</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl -X POST &quot;http://localhost:9200/00133fkfkg_2026_01/_search&quot; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -u &quot;admin:admin&quot; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -d &#x27;{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;size&quot;: 0,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;query&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;range&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;server_dt&quot;: { &quot;gte&quot;: &quot;2026-01-01&quot;, &quot;lt&quot;: &quot;2026-02-01&quot; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;aggs&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;by_process_path&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;composite&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          &quot;size&quot;: 10,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          &quot;sources&quot;: [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            { &quot;process&quot;: { &quot;terms&quot;: { &quot;field&quot;: &quot;process_nm.keyword&quot; } } },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            { &quot;path&quot;: { &quot;terms&quot;: { &quot;field&quot;: &quot;file_nm.keyword&quot; } } }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }&#x27; | jq &#x27;.aggregations.by_process_path.buckets&#x27;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="943-응답-구조-및-해석">9.4.3 응답 구조 및 해석<a href="#943-응답-구조-및-해석" class="hash-link" aria-label="Direct link to 9.4.3 응답 구조 및 해석" title="Direct link to 9.4.3 응답 구조 및 해석" translate="no">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;buckets&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;key&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;process&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;C:\\Windows\\Explorer.EXE&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;path&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;doc_count&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">42349</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;key&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;process&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;C:\\Windows\\system32\\svchost.exe&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;path&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;doc_count&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">5966</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<ul>
<li class=""><strong><code>key.process</code></strong>: 실행 프로세스 경로</li>
<li class=""><strong><code>key.path</code></strong>: 접근 대상 파일/경로 (빈 문자열은 경로 미지정 이벤트)</li>
<li class=""><strong><code>doc_count</code></strong>: 해당 조합의 발생 건수</li>
</ul>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="95-agent-anomaly-이상-에이전트-탐지">9.5 agent-anomaly: 이상 에이전트 탐지<a href="#95-agent-anomaly-이상-에이전트-탐지" class="hash-link" aria-label="Direct link to 9.5 agent-anomaly: 이상 에이전트 탐지" title="Direct link to 9.5 agent-anomaly: 이상 에이전트 탐지" translate="no">​</a></h3>
<p><strong>목적</strong>: 평균 대비 과도하게 로깅하는 에이전트 식별</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="951-opensearch-dsl-쿼리">9.5.1 OpenSearch DSL 쿼리<a href="#951-opensearch-dsl-쿼리" class="hash-link" aria-label="Direct link to 9.5.1 OpenSearch DSL 쿼리" title="Direct link to 9.5.1 OpenSearch DSL 쿼리" translate="no">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;size&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;range&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;server_dt&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;gte&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2026-01-01&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;lt&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2026-02-01&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;aggs&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;by_agent&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;terms&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;field&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;puid.keyword&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;size&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">10000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;agent_stats&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;extended_stats_bucket&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;buckets_path&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;by_agent._count&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="952-핵심-집계-설명">9.5.2 핵심 집계 설명<a href="#952-핵심-집계-설명" class="hash-link" aria-label="Direct link to 9.5.2 핵심 집계 설명" title="Direct link to 9.5.2 핵심 집계 설명" translate="no">​</a></h4>
<table><thead><tr><th style="text-align:left">집계 유형</th><th style="text-align:left">필드</th><th style="text-align:left">설명</th></tr></thead><tbody><tr><td style="text-align:left"><code>terms</code></td><td style="text-align:left"><code>by_agent</code></td><td style="text-align:left">에이전트(PUID)별 로그 건수 집계</td></tr><tr><td style="text-align:left"><code>extended_stats_bucket</code></td><td style="text-align:left"><code>agent_stats</code></td><td style="text-align:left">버킷 통계 계산 (평균, 표준편차 등)</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="953-이상-탐지-알고리즘">9.5.3 이상 탐지 알고리즘<a href="#953-이상-탐지-알고리즘" class="hash-link" aria-label="Direct link to 9.5.3 이상 탐지 알고리즘" title="Direct link to 9.5.3 이상 탐지 알고리즘" translate="no">​</a></h4>
<p><code>tkctl</code>는 다음 로직으로 이상 에이전트를 판정합니다:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">이상 여부 = (에이전트 로그 건수 / 전체 평균) &gt;= 임계치(기본 5.0)</span><br></span></code></pre></div></div>
<p><strong>판정 기준:</strong></p>
<ul>
<li class=""><strong>🔴 심각</strong>: 평균 대비 10배 이상 (Multiplier ≥ 10.0)</li>
<li class=""><strong>⚠️ 주의</strong>: 평균 대비 5~10배 (Multiplier ≥ 5.0)</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="954-수동-분석-절차">9.5.4 수동 분석 절차<a href="#954-수동-분석-절차" class="hash-link" aria-label="Direct link to 9.5.4 수동 분석 절차" title="Direct link to 9.5.4 수동 분석 절차" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 1. 에이전트별 통계 조회</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl -X POST &quot;http://localhost:9200/00133fkfkg_2026_01/_search&quot; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -u &quot;admin:admin&quot; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -d &#x27;{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;size&quot;: 0,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;aggs&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;by_agent&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;terms&quot;: { &quot;field&quot;: &quot;puid.keyword&quot;, &quot;size&quot;: 10000 }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;agent_stats&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;extended_stats_bucket&quot;: { &quot;buckets_path&quot;: &quot;by_agent._count&quot; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }&#x27; &gt; /tmp/agent_stats.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 2. 평균값 확인</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">jq &#x27;.aggregations.agent_stats.avg&#x27; /tmp/agent_stats.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 3. 표준편차 확인</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">jq &#x27;.aggregations.agent_stats.std_deviation&#x27; /tmp/agent_stats.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 4. 상위 이상 에이전트 식별 (평균의 5배 이상 필터링)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AVG=$(jq &#x27;.aggregations.agent_stats.avg&#x27; /tmp/agent_stats.json)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">THRESHOLD=$(echo &quot;$AVG * 5&quot; | bc)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">jq --argjson th $THRESHOLD \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &#x27;.aggregations.by_agent.buckets | map(select(.doc_count &gt;= $th)) | sort_by(-.doc_count) | .[0:10]&#x27; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  /tmp/agent_stats.json</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="96-process-top-프로세스별-로그-집계">9.6 process-top: 프로세스별 로그 집계<a href="#96-process-top-프로세스별-로그-집계" class="hash-link" aria-label="Direct link to 9.6 process-top: 프로세스별 로그 집계" title="Direct link to 9.6 process-top: 프로세스별 로그 집계" translate="no">​</a></h3>
<p><strong>목적</strong>: 가장 많은 로그를 발생시키는 프로세스 순위 파악</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="961-opensearch-dsl-쿼리">9.6.1 OpenSearch DSL 쿼리<a href="#961-opensearch-dsl-쿼리" class="hash-link" aria-label="Direct link to 9.6.1 OpenSearch DSL 쿼리" title="Direct link to 9.6.1 OpenSearch DSL 쿼리" translate="no">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;size&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;range&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;server_dt&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;gte&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2026-01-01&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;lt&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2026-02-01&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;aggs&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;by_process&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;terms&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;field&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;process_nm.keyword&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;size&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;order&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token property">&quot;_count&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;desc&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="962-수동-실행-opensearch-dashboards">9.6.2 수동 실행 (OpenSearch Dashboards)<a href="#962-수동-실행-opensearch-dashboards" class="hash-link" aria-label="Direct link to 9.6.2 수동 실행 (OpenSearch Dashboards)" title="Direct link to 9.6.2 수동 실행 (OpenSearch Dashboards)" translate="no">​</a></h4>
<p>OpenSearch Dashboards에서 다음 시각화를 생성할 수 있습니다:</p>
<ol>
<li class=""><strong>Visualize</strong> → <strong>Lens</strong> 또는 <strong>Vertical Bar Chart</strong></li>
<li class=""><strong>Index Pattern</strong>: <code>00133fkfkg_*</code></li>
<li class=""><strong>Metrics</strong>: Count</li>
<li class=""><strong>Buckets</strong>: Terms, <code>process_nm.keyword</code>, Top 20</li>
</ol>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="97-recommend-데이터-기반-분석-추천">9.7 recommend: 데이터 기반 분석 추천<a href="#97-recommend-데이터-기반-분석-추천" class="hash-link" aria-label="Direct link to 9.7 recommend: 데이터 기반 분석 추천" title="Direct link to 9.7 recommend: 데이터 기반 분석 추천" translate="no">​</a></h3>
<p><strong>목적</strong>: MariaDB 로그 테이블의 증가율을 분석하여 심층 분석이 필요한 항목 자동 추천</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="971-mariadb-쿼리-구조">9.7.1 MariaDB 쿼리 구조<a href="#971-mariadb-쿼리-구조" class="hash-link" aria-label="Direct link to 9.7.1 MariaDB 쿼리 구조" title="Direct link to 9.7.1 MariaDB 쿼리 구조" translate="no">​</a></h4>
<p><strong>현재 월 및 전월 건수 조회:</strong></p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">-- 2026년 1월 건수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">COUNT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> TPU_ISTAT_MEDIA_EVENT_LOG </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"> server_dt </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;2026-01-01&#x27;</span><span class="token plain"> </span><span class="token operator">AND</span><span class="token plain"> server_dt </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;2026-02-01&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- 2025년 12월 건수 (전월)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">COUNT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> TPU_ISTAT_MEDIA_EVENT_LOG </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"> server_dt </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;2025-12-01&#x27;</span><span class="token plain"> </span><span class="token operator">AND</span><span class="token plain"> server_dt </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;2026-01-01&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="972-분석-대상-테이블">9.7.2 분석 대상 테이블<a href="#972-분석-대상-테이블" class="hash-link" aria-label="Direct link to 9.7.2 분석 대상 테이블" title="Direct link to 9.7.2 분석 대상 테이블" translate="no">​</a></h4>
<table><thead><tr><th style="text-align:left">테이블명</th><th style="text-align:left">분석 유형</th><th style="text-align:left">권장 명령어</th></tr></thead><tbody><tr><td style="text-align:left"><code>TPU_ISTAT_MEDIA_EVENT_LOG</code></td><td style="text-align:left">매체제어 로그</td><td style="text-align:left"><code>tkctl analyze media-top</code></td></tr><tr><td style="text-align:left"><code>TPU_ISTAT_EVENT_LOG</code></td><td style="text-align:left">이벤트 로그</td><td style="text-align:left"><code>tkctl analyze process-top</code></td></tr><tr><td style="text-align:left"><code>TPU_ISTAT_SYS_LOG</code></td><td style="text-align:left">시스템 로그</td><td style="text-align:left"><code>tkctl analyze process-top</code></td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="973-증가율-계산-공식">9.7.3 증가율 계산 공식<a href="#973-증가율-계산-공식" class="hash-link" aria-label="Direct link to 9.7.3 증가율 계산 공식" title="Direct link to 9.7.3 증가율 계산 공식" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">증가율(%) = (현재 월 건수 - 전월 건수) / 전월 건수 × 100</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="974-우선순위-판정-기준">9.7.4 우선순위 판정 기준<a href="#974-우선순위-판정-기준" class="hash-link" aria-label="Direct link to 9.7.4 우선순위 판정 기준" title="Direct link to 9.7.4 우선순위 판정 기준" translate="no">​</a></h4>
<table><thead><tr><th style="text-align:left">우선순위</th><th style="text-align:left">조건</th><th style="text-align:left">표시 아이콘</th><th style="text-align:left">권장 조치</th></tr></thead><tbody><tr><td style="text-align:left"><strong>1 (폭증)</strong></td><td style="text-align:left">증가율 ≥ 100%</td><td style="text-align:left">🔴</td><td style="text-align:left">즉시 분석 필요</td></tr><tr><td style="text-align:left"><strong>2 (급증)</strong></td><td style="text-align:left">50% ≤ 증가율 &lt; 100%</td><td style="text-align:left">⚠️</td><td style="text-align:left">원인 분석 권장</td></tr><tr><td style="text-align:left"><strong>3 (정상)</strong></td><td style="text-align:left">증가율 &lt; 50%</td><td style="text-align:left">✅</td><td style="text-align:left">정상 범위</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="975-수동-분석-스크립트">9.7.5 수동 분석 스크립트<a href="#975-수동-분석-스크립트" class="hash-link" aria-label="Direct link to 9.7.5 수동 분석 스크립트" title="Direct link to 9.7.5 수동 분석 스크립트" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># recommend 분석 수동 수행</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DBNAME=&quot;00133FKFKG&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MONTH=&quot;2026-01&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PREV_MONTH=&quot;2025-12&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 매체제어 로그 증가율 분석</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CURRENT=$(mysql -u tachyon -p&#x27;password&#x27; $DBNAME -N -e \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;SELECT COUNT(*) FROM TPU_ISTAT_MEDIA_EVENT_LOG </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   WHERE server_dt &gt;= &#x27;${MONTH}-01&#x27; AND server_dt &lt; DATE_ADD(&#x27;${MONTH}-01&#x27;, INTERVAL 1 MONTH);&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PREVIOUS=$(mysql -u tachyon -p&#x27;password&#x27; $DBNAME -N -e \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;SELECT COUNT(*) FROM TPU_ISTAT_MEDIA_EVENT_LOG </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   WHERE server_dt &gt;= &#x27;${PREV_MONTH}-01&#x27; AND server_dt &lt; &#x27;${MONTH}-01&#x27;;&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if [ &quot;$PREVIOUS&quot; -gt 0 ]; then</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  RATE=$(echo &quot;scale=1; ($CURRENT - $PREVIOUS) * 100 / $PREVIOUS&quot; | bc)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  echo &quot;매체제어 로그: 현재=${CURRENT}, 전월=${PREVIOUS}, 증가율=${RATE}%&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  if (( $(echo &quot;$RATE &gt;= 100&quot; | bc -l) )); then</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    echo &quot;🔴 폭증 - 즉시 분석 필요: tkctl analyze media-top --month $MONTH&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  elif (( $(echo &quot;$RATE &gt;= 50&quot; | bc -l) )); then</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    echo &quot;⚠️ 급증 - 원인 분석 권장: tkctl analyze media-top --month $MONTH&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    echo &quot;✅ 정상 범위&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fi</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="98-db-trend-db-데이터-증가-추세-분석">9.8 db-trend: DB 데이터 증가 추세 분석<a href="#98-db-trend-db-데이터-증가-추세-분석" class="hash-link" aria-label="Direct link to 9.8 db-trend: DB 데이터 증가 추세 분석" title="Direct link to 9.8 db-trend: DB 데이터 증가 추세 분석" translate="no">​</a></h3>
<p><strong>목적</strong>: LOG 테이블의 기간별(1주, 1개월, 1분기, 1년) 누적 증가 추세 파악</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="981-mariadb-쿼리-구조">9.8.1 MariaDB 쿼리 구조<a href="#981-mariadb-쿼리-구조" class="hash-link" aria-label="Direct link to 9.8.1 MariaDB 쿼리 구조" title="Direct link to 9.8.1 MariaDB 쿼리 구조" translate="no">​</a></h4>
<p><strong>기간별 누적 건수 조회:</strong></p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">-- 1주 전 시점까지의 누적 건수 (Start Total)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">COUNT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> TPU_ISTAT_MEDIA_EVENT_LOG </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"> server_dt </span><span class="token operator">&lt;</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">CURDATE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INTERVAL</span><span class="token plain"> </span><span class="token number">7</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DAY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- 현재까지의 누적 건수 (End Total)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">COUNT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> TPU_ISTAT_MEDIA_EVENT_LOG </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"> server_dt </span><span class="token operator">&lt;</span><span class="token plain"> DATE_ADD</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">CURDATE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INTERVAL</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DAY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="982-증가율-계산">9.8.2 증가율 계산<a href="#982-증가율-계산" class="hash-link" aria-label="Direct link to 9.8.2 증가율 계산" title="Direct link to 9.8.2 증가율 계산" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">기간 증가 건수 = End Total - Start Total</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">증가율(%) = (End Total - Start Total) / Start Total × 100</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="983-추세-판정-기준">9.8.3 추세 판정 기준<a href="#983-추세-판정-기준" class="hash-link" aria-label="Direct link to 9.8.3 추세 판정 기준" title="Direct link to 9.8.3 추세 판정 기준" translate="no">​</a></h4>
<table><thead><tr><th style="text-align:left">추세</th><th style="text-align:left">증가율 조건</th><th style="text-align:left">표시</th></tr></thead><tbody><tr><td style="text-align:left"><strong>폭증 (위험)</strong></td><td style="text-align:left">≥ 50%</td><td style="text-align:left">🔴</td></tr><tr><td style="text-align:left"><strong>급증 (주의)</strong></td><td style="text-align:left">20% ~ 50%</td><td style="text-align:left">🟠</td></tr><tr><td style="text-align:left"><strong>완만 (정상)</strong></td><td style="text-align:left">5% ~ 20%</td><td style="text-align:left">↗</td></tr><tr><td style="text-align:left"><strong>유지 (안정)</strong></td><td style="text-align:left">0% ~ 5%</td><td style="text-align:left">→</td></tr><tr><td style="text-align:left"><strong>감소</strong></td><td style="text-align:left">&lt; 0%</td><td style="text-align:left">↘</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="984-수동-분석-쿼리-예시">9.8.4 수동 분석 쿼리 예시<a href="#984-수동-분석-쿼리-예시" class="hash-link" aria-label="Direct link to 9.8.4 수동 분석 쿼리 예시" title="Direct link to 9.8.4 수동 분석 쿼리 예시" translate="no">​</a></h4>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">-- 지난 1주간 증가 추세</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SET</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@start_total</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">COUNT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> TPU_ISTAT_MEDIA_EVENT_LOG </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"> server_dt </span><span class="token operator">&lt;</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">CURDATE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INTERVAL</span><span class="token plain"> </span><span class="token number">7</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DAY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SET</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@end_total</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">COUNT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> TPU_ISTAT_MEDIA_EVENT_LOG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SET</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@increase</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@end_total</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@start_total</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SET</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@rate</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">IF</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@start_total</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@increase</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@start_total</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;최근 1주&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AS</span><span class="token plain"> period</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@start_total</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AS</span><span class="token plain"> start_cnt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@end_total</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AS</span><span class="token plain"> end_cnt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@increase</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AS</span><span class="token plain"> increase</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       CONCAT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">ROUND</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@rate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AS</span><span class="token plain"> growth_rate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CASE</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHEN</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@rate</span><span class="token plain"> </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token number">50</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">THEN</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;🔴 폭증 (위험)&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHEN</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@rate</span><span class="token plain"> </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token number">20</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">THEN</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;🟠 급증 (주의)&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHEN</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@rate</span><span class="token plain"> </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">THEN</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;↗ 완만 (정상)&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHEN</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@rate</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">THEN</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;→ 유지 (안정)&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ELSE</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;↘ 감소&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">END</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AS</span><span class="token plain"> trend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="99-opensearch-연결-설정-확인">9.9 OpenSearch 연결 설정 확인<a href="#99-opensearch-연결-설정-확인" class="hash-link" aria-label="Direct link to 9.9 OpenSearch 연결 설정 확인" title="Direct link to 9.9 OpenSearch 연결 설정 확인" translate="no">​</a></h3>
<p><code>tkctl analyze</code>가 사용하는 OpenSearch 연결 정보를 확인하는 방법입니다:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="991-설정-파일-위치">9.9.1 설정 파일 위치<a href="#991-설정-파일-위치" class="hash-link" aria-label="Direct link to 9.9.1 설정 파일 위치" title="Direct link to 9.9.1 설정 파일 위치" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 기본 설정 파일 (암호화된 상태일 수 있음)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cat /usr/local/TACHYON/TTS40/conf/app_info.properties</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 평문 원본 (운영 환경에 따라 다름)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cat /usr/local/TACHYON/TTS40/conf/app_info.properties_dev*</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="992-주요-설정-항목">9.9.2 주요 설정 항목<a href="#992-주요-설정-항목" class="hash-link" aria-label="Direct link to 9.9.2 주요 설정 항목" title="Direct link to 9.9.2 주요 설정 항목" translate="no">​</a></h4>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">opensearch_ip=127.0.0.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">opensearch_port=9200</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">opensearch_id=admin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">opensearch_pw=admin</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="993-tkctlini-개별-설정-우선순위-높음">9.9.3 tkctl.ini 개별 설정 (우선순위 높음)<a href="#993-tkctlini-개별-설정-우선순위-높음" class="hash-link" aria-label="Direct link to 9.9.3 tkctl.ini 개별 설정 (우선순위 높음)" title="Direct link to 9.9.3 tkctl.ini 개별 설정 (우선순위 높음)" translate="no">​</a></h4>
<p><code>tkctl.ini</code> 파일에서 OpenSearch URL을 별도로 지정할 수 있습니다:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[opensearch]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">url=http://localhost:9200</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="910-분석-결과-파일-저장-형식">9.10 분석 결과 파일 저장 형식<a href="#910-분석-결과-파일-저장-형식" class="hash-link" aria-label="Direct link to 9.10 분석 결과 파일 저장 형식" title="Direct link to 9.10 분석 결과 파일 저장 형식" translate="no">​</a></h3>
<p><code>--output</code> 옵션 사용 시 다음 형식으로 저장됩니다:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="9101-csv-형식-csv">9.10.1 CSV 형식 (<code>.csv</code>)<a href="#9101-csv-형식-csv" class="hash-link" aria-label="Direct link to 9101-csv-형식-csv" title="Direct link to 9101-csv-형식-csv" translate="no">​</a></h4>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">RANK,PROCESS,PATH,COUNT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1,C:\Windows\Explorer.EXE,,42349</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2,C:\Windows\system32\svchost.exe,,5966</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3,C:\Program Files\Windows Defender\MsMpEng.exe,E:\,2611</span><br></span></code></pre></div></div>
<ul>
<li class=""><strong>인코딩</strong>: UTF-8 with BOM (Excel 호환)</li>
<li class=""><strong>구분자</strong>: 콤마(<code>,</code>)</li>
<li class=""><strong>줄바꿈</strong>: CRLF</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="9102-txt-형식-txt">9.10.2 TXT 형식 (<code>.txt</code>)<a href="#9102-txt-형식-txt" class="hash-link" aria-label="Direct link to 9102-txt-형식-txt" title="Direct link to 9102-txt-형식-txt" translate="no">​</a></h4>
<p>테이블 형태의 텍스트 파일로 저장됩니다.</p>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="911-트러블슈팅">9.11 트러블슈팅<a href="#911-트러블슈팅" class="hash-link" aria-label="Direct link to 9.11 트러블슈팅" title="Direct link to 9.11 트러블슈팅" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="9111-opensearch-연결-실패">9.11.1 OpenSearch 연결 실패<a href="#9111-opensearch-연결-실패" class="hash-link" aria-label="Direct link to 9.11.1 OpenSearch 연결 실패" title="Direct link to 9.11.1 OpenSearch 연결 실패" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">OpenSearch 호출 실패: dial tcp 127.0.0.1:9200: connect: connection refused</span><br></span></code></pre></div></div>
<p><strong>원인 및 조치:</strong></p>
<ol>
<li class="">OpenSearch 서비스 확인: <code>systemctl status opensearch</code></li>
<li class="">포트 리스닝 확인: <code>ss -tlnp | grep 9200</code></li>
<li class="">방화벽 확인: <code>firewall-cmd --list-ports</code></li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="9112-인덱스-없음-오류">9.11.2 인덱스 없음 오류<a href="#9112-인덱스-없음-오류" class="hash-link" aria-label="Direct link to 9.11.2 인덱스 없음 오류" title="Direct link to 9.11.2 인덱스 없음 오류" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">해당 기간에 데이터가 없습니다.</span><br></span></code></pre></div></div>
<p><strong>원인 및 조치:</strong></p>
<ol>
<li class="">인덱스 존재 확인: <code>curl &quot;http://localhost:9200/_cat/indices?v&quot; | grep {spcode}</code></li>
<li class="">날짜 범위 확인: 지정한 월에 데이터가 있는지 검증</li>
<li class="">SPCODE 확인: 인덱스명의 기관 코드가 올바른지 확인</li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="9113-mariadb-연결-실패">9.11.3 MariaDB 연결 실패<a href="#9113-mariadb-연결-실패" class="hash-link" aria-label="Direct link to 9.11.3 MariaDB 연결 실패" title="Direct link to 9.11.3 MariaDB 연결 실패" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">DB 연결 실패: dial tcp 127.0.0.1:3306: connect: connection refused</span><br></span></code></pre></div></div>
<p><strong>원인 및 조치:</strong></p>
<ol>
<li class="">MariaDB 서비스 확인: <code>systemctl status mariadb</code></li>
<li class="">접속 정보 확인: <code>app_info.properties</code>의 <code>db_ip</code>, <code>db_port</code>, <code>db_user</code>, <code>db_password</code></li>
</ol>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="912-고급-분석-쿼리-레퍼런스">9.12 고급 분석 쿼리 레퍼런스<a href="#912-고급-분석-쿼리-레퍼런스" class="hash-link" aria-label="Direct link to 9.12 고급 분석 쿼리 레퍼런스" title="Direct link to 9.12 고급 분석 쿼리 레퍼런스" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="9121-특정-프로세스-상세-분석">9.12.1 특정 프로세스 상세 분석<a href="#9121-특정-프로세스-상세-분석" class="hash-link" aria-label="Direct link to 9.12.1 특정 프로세스 상세 분석" title="Direct link to 9.12.1 특정 프로세스 상세 분석" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Explorer.EXE의 접근 경로 상세 분석</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl -X POST &quot;http://localhost:9200/00133fkfkg_2026_01/_search&quot; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -d &#x27;{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;size&quot;: 0,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;query&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;bool&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;must&quot;: [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          { &quot;range&quot;: { &quot;server_dt&quot;: { &quot;gte&quot;: &quot;2026-01-01&quot;, &quot;lt&quot;: &quot;2026-02-01&quot; } } },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          { &quot;match&quot;: { &quot;process_nm&quot;: &quot;Explorer.EXE&quot; } }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;aggs&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;by_path&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;terms&quot;: { &quot;field&quot;: &quot;file_nm.keyword&quot;, &quot;size&quot;: 50 }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }&#x27; | jq &#x27;.aggregations.by_path.buckets&#x27;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="9122-특정-에이전트-이벤트-상세-조회">9.12.2 특정 에이전트 이벤트 상세 조회<a href="#9122-특정-에이전트-이벤트-상세-조회" class="hash-link" aria-label="Direct link to 9.12.2 특정 에이전트 이벤트 상세 조회" title="Direct link to 9.12.2 특정 에이전트 이벤트 상세 조회" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 이상 에이전트의 최근 이벤트 100건 조회</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl -X POST &quot;http://localhost:9200/00133fkfkg_2026_01/_search&quot; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -d &#x27;{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;size&quot;: 100,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;query&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;bool&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;must&quot;: [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          { &quot;term&quot;: { &quot;puid.keyword&quot;: &quot;a1b2c3d4-e5f6-7890-abcd-ef1234567890&quot; } }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;sort&quot;: [{ &quot;server_dt&quot;: &quot;desc&quot; }],</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;_source&quot;: [&quot;server_dt&quot;, &quot;process_nm&quot;, &quot;file_nm&quot;, &quot;event_type&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }&#x27; | jq &#x27;.hits.hits[]._source&#x27;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="9123-일별-로그-발생량-추이">9.12.3 일별 로그 발생량 추이<a href="#9123-일별-로그-발생량-추이" class="hash-link" aria-label="Direct link to 9.12.3 일별 로그 발생량 추이" title="Direct link to 9.12.3 일별 로그 발생량 추이" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 일별 로그 건수 집계</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl -X POST &quot;http://localhost:9200/00133fkfkg_2026_01/_search&quot; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -d &#x27;{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;size&quot;: 0,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;aggs&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;by_day&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;terms&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          &quot;field&quot;: &quot;server_dt&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          &quot;size&quot;: 31,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          &quot;order&quot;: { &quot;_key&quot;: &quot;asc&quot; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }&#x27; | jq &#x27;.aggregations.by_day.buckets&#x27;</span><br></span></code></pre></div></div>
<hr>
<blockquote>
<p><strong>참고</strong>: 본 문서에 기재된 쿼리는 TACHYON 4.0 시스템의 기본 스키마를 기준으로 작성되었습니다. 실제 운영 환경에서 필드명이나 인덱스 구조가 다를 수 있으므로, 스키마 확인 후 사용하십시오.</p>
</blockquote></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/tkadmin-releases/en/tkctl/trouble"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">8. 문제 해결</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tkadmin-releases/en/tkctl/SECURITY_IMPLEMENTATION_SPEC_2026"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">KISA 2026 구현 명세서</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-개요" class="table-of-contents__link toc-highlight">1. 개요</a></li><li><a href="#2-미들웨어-서비스-middleware" class="table-of-contents__link toc-highlight">2. 미들웨어 서비스 (Middleware)</a></li><li><a href="#3-tachyon-java-서비스" class="table-of-contents__link toc-highlight">3. TACHYON Java 서비스</a><ul><li><a href="#31-설정-파일-탐색-우선순위" class="table-of-contents__link toc-highlight">3.1 설정 파일 탐색 우선순위</a></li><li><a href="#32-파싱-기술-명세" class="table-of-contents__link toc-highlight">3.2 파싱 기술 명세</a></li></ul></li><li><a href="#4-관리-도구-management-tools" class="table-of-contents__link toc-highlight">4. 관리 도구 (Management Tools)</a></li><li><a href="#5-진단-상태status-설명" class="table-of-contents__link toc-highlight">5. 진단 상태(Status) 설명</a></li><li><a href="#6-시스템-환경-설정-진단-및-구성-명세-env" class="table-of-contents__link toc-highlight">6. 시스템 환경 설정 진단 및 구성 명세 (env)</a><ul><li><a href="#61-selinux" class="table-of-contents__link toc-highlight">6.1 SELinux</a></li><li><a href="#62-시스템-자원-제한-ulimit" class="table-of-contents__link toc-highlight">6.2 시스템 자원 제한 (Ulimit)</a></li><li><a href="#63-방화벽-firewall" class="table-of-contents__link toc-highlight">6.3 방화벽 (Firewall)</a></li><li><a href="#64-ssh-설정-및-연동" class="table-of-contents__link toc-highlight">6.4 SSH 설정 및 연동</a></li></ul></li><li><a href="#7-jvm-메모리-설정-및-자동-최적화-기술-명세-service-jvm" class="table-of-contents__link toc-highlight">7. JVM 메모리 설정 및 자동 최적화 기술 명세 (service jvm)</a><ul><li><a href="#71-서비스별-설정-파일-및-파싱-로직" class="table-of-contents__link toc-highlight">7.1 서비스별 설정 파일 및 파싱 로직</a></li><li><a href="#72-자동-최적화-auto-알고리즘-상세" class="table-of-contents__link toc-highlight">7.2 자동 최적화 (auto) 알고리즘 상세</a></li><li><a href="#73-안전-관리-프로세스" class="table-of-contents__link toc-highlight">7.3 안전 관리 프로세스</a></li></ul></li><li><a href="#8-os-메모리-관리-및-점유-방식-기술-명세-memory-management" class="table-of-contents__link toc-highlight">8. OS 메모리 관리 및 점유 방식 기술 명세 (Memory Management)</a><ul><li><a href="#81-linux-vs-windows-메모리-관리-기조-차이" class="table-of-contents__link toc-highlight">8.1 Linux vs Windows 메모리 관리 기조 차이</a></li><li><a href="#82-페이지-캐시page-cache와-과점유-현황" class="table-of-contents__link toc-highlight">8.2 페이지 캐시(Page Cache)와 과점유 현황</a></li><li><a href="#83-결론-및-판정-기준" class="table-of-contents__link toc-highlight">8.3 결론 및 판정 기준</a></li></ul></li><li><a href="#9-로그-분석-시스템-기술-명세-analyze" class="table-of-contents__link toc-highlight">9. 로그 분석 시스템 기술 명세 (analyze)</a><ul><li><a href="#91-개요-및-데이터-소스" class="table-of-contents__link toc-highlight">9.1 개요 및 데이터 소스</a></li><li><a href="#92-opensearch-인덱스-명명-규칙" class="table-of-contents__link toc-highlight">9.2 OpenSearch 인덱스 명명 규칙</a></li><li><a href="#93-opensearch-필드-매핑-field-mapping" class="table-of-contents__link toc-highlight">9.3 OpenSearch 필드 매핑 (Field Mapping)</a></li><li><a href="#94-media-top-프로세스경로별-top-n-분석" class="table-of-contents__link toc-highlight">9.4 media-top: 프로세스+경로별 Top N 분석</a></li><li><a href="#95-agent-anomaly-이상-에이전트-탐지" class="table-of-contents__link toc-highlight">9.5 agent-anomaly: 이상 에이전트 탐지</a></li><li><a href="#96-process-top-프로세스별-로그-집계" class="table-of-contents__link toc-highlight">9.6 process-top: 프로세스별 로그 집계</a></li><li><a href="#97-recommend-데이터-기반-분석-추천" class="table-of-contents__link toc-highlight">9.7 recommend: 데이터 기반 분석 추천</a></li><li><a href="#98-db-trend-db-데이터-증가-추세-분석" class="table-of-contents__link toc-highlight">9.8 db-trend: DB 데이터 증가 추세 분석</a></li><li><a href="#99-opensearch-연결-설정-확인" class="table-of-contents__link toc-highlight">9.9 OpenSearch 연결 설정 확인</a></li><li><a href="#910-분석-결과-파일-저장-형식" class="table-of-contents__link toc-highlight">9.10 분석 결과 파일 저장 형식</a></li><li><a href="#911-트러블슈팅" class="table-of-contents__link toc-highlight">9.11 트러블슈팅</a></li><li><a href="#912-고급-분석-쿼리-레퍼런스" class="table-of-contents__link toc-highlight">9.12 고급 분석 쿼리 레퍼런스</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">문서</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/tkadmin-releases/en/tkadmin/">tkadmin 매뉴얼</a></li><li class="footer__item"><a class="footer__link-item" href="/tkadmin-releases/en/tkctl/">tkctl 매뉴얼</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">관련 링크</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://www.tsgroup.co.kr" target="_blank" rel="noopener noreferrer" class="footer__link-item">TSGroup Home<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 TSGroup, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>